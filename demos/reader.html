<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<!--
reader.html (part of Era)
Copyright 2013-2015 Ross Angle. Released under the MIT License.
-->
<title>Era reader demo</title>
<style type="text/css">
textarea { display: block; }
</style>
</head>
<body>
<p><a href="https://github.com/rocketnia/era"
    >View the Era project on GitHub.</a></p>

<textarea id="code" cols="80" rows="24">
\ This reads as the string "foo".
foo

\ This is the string "12".
12

\ Strings can usually only contain letters, numbers, and the '-' and
\ '*' punctuation characters. If you need more characters than that,
\ an alternative syntax makes it possible to express other characters.
\ This is the string consisting of a tab, a percent sign, a left
\ square bracket, and a right square bracket.
\-qq[\.t%[]]

\ This is the list containing the strings "a", "b", and "c".
(a b c)

\ This is the list [ "a", "b" ] in binary infix notation. Lisp
\ dialects usually use the '.' character for dotted lists, but this
\ syntax uses it for infix instead.
a.b

\ The "a.b" operator is left-associative, so this is
\ [ [ "a", "b" ], "c" ].
a.b.c

\ The / reader macro is like ( but doesn't consume ). Thus, the
\ following is shorthand for (a b (c d)).
(a b /c d)
</textarea>
<button id="read">Read</button>
<textarea id="result" disabled cols="80" rows="24"></textarea>

<script type="text/javascript" src="../src/era-misc-strmap-avl.js">
    </script>
<script type="text/javascript" src="../src/era-misc.js"></script>
<script type="text/javascript" src="../src/era-reader.js"></script>
<script type="text/javascript">"use strict";

window.onload = function () {
    function showResults() {
        document.getElementById( "result" ).value = arrMap(
            readAll( document.getElementById( "code" ).value ),
            function ( result ) {
            
            if ( result.ok )
                return JSON.stringify( result.val, null, "    " );
            else
                return "Error: " + result.msg;
        } ).join( "\n" );
    }
    document.getElementById( "read" ).onclick = showResults;
    showResults();
};
</script>
</body>
</html>
